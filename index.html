<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluador de Comprensi贸n Lectora</title>
    <style>
        /* Variables de color y tema */
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --success: #06d6a0;
            --danger: #ef476f;
            --warning: #ffd166;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --gray: #6c757d;
            --gray-light: #e9ecef;
        }
        
        /* Estilos generales */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        h1, h2, h3 {
            color: var(--dark);
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            padding-bottom: 15px;
            position: relative;
            font-size: 2.8rem;
        }
        
        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }
        
        .container {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-bottom: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .container:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Estilos para botones */
        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 8px;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(67, 97, 238, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #05c997);
            box-shadow: 0 4px 15px rgba(6, 214, 160, 0.3);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #e63946);
            box-shadow: 0 4px 15px rgba(239, 71, 111, 0.3);
        }
        
        /* Men煤 principal */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .menu-item {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            border-left: 6px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }
        
        .menu-item:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .menu-item h3 {
            margin-bottom: 12px;
            color: var(--dark);
            font-size: 1.4rem;
        }
        
        .menu-item p {
            color: var(--gray);
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        
        .menu-item .badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 10px;
            align-self: center;
        }
        
        .menu-item.general {
            border-left: 6px solid var(--secondary);
            background: linear-gradient(145deg, #f3e5f5, #e1bee7);
        }
        
        .menu-item.general::before {
            background: linear-gradient(90deg, var(--secondary), #9c27b0);
        }
        
        /* Texto de lectura */
        .text-container {
            max-height: 500px;
            overflow-y: auto;
            padding: 25px;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            margin-bottom: 25px;
            border: 2px dashed var(--gray-light);
        }
        
        .text-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .text-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .text-container::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--primary), var(--secondary));
            border-radius: 10px;
        }
        
        .text-content {
            white-space: pre-line;
            line-height: 1.8;
            font-size: 1.05rem;
            color: var(--dark);
        }
        
        .text-title {
            color: var(--dark);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--primary);
            position: relative;
            font-size: 1.8rem;
        }
        
        .text-title::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px;
        }
        
        /* Resumen */
        .summary-container {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 6px solid var(--primary);
            position: relative;
            overflow: hidden;
        }
        
        .summary-container::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 3rem;
            opacity: 0.1;
        }
        
        .summary-container h3 {
            color: #1565c0;
            margin-bottom: 15px;
        }
        
        /* Opciones de examen */
        .options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
        }
        
        .option-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 320px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.4s ease;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .option-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border: 2px solid var(--primary);
        }
        
        .option-card h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.6rem;
        }
        
        .option-card p {
            color: var(--gray);
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .option-card .highlight {
            margin-top: 15px;
            color: var(--primary);
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        /* Configuraci贸n de preguntas */
        .config-container {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px solid var(--gray-light);
        }
        
        .slider-container {
            margin: 25px 0;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: var(--dark);
            font-size: 1.1rem;
        }
        
        .slider {
            width: 100%;
            height: 25px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            outline: none;
            border-radius: 15px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            border: 3px solid var(--primary);
            transition: all 0.2s ease;
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            border: 3px solid var(--secondary);
        }
        
        .slider-value {
            text-align: center;
            font-weight: bold;
            font-size: 1.5rem;
            margin-top: 15px;
            color: var(--primary);
        }
        
        /* Preguntas del examen */
        .progress-container {
            margin: 25px 0;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .progress-bar {
            height: 20px;
            background: var(--gray-light);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 15px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .question-counter {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border-left: 6px solid var(--primary);
        }
        
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 25px;
            font-weight: 600;
            color: var(--dark);
            line-height: 1.5;
        }
        
        .options-list {
            list-style-type: none;
        }
        
        .option-item {
            background: white;
            padding: 18px;
            margin-bottom: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid var(--gray-light);
            font-size: 1.05rem;
            color: var(--gray);
            position: relative;
            overflow: hidden;
        }
        
        .option-item::before {
            content: attr(data-letter);
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: var(--primary);
        }
        
        .option-item span {
            margin-left: 30px;
            display: block;
        }
        
        .option-item:hover {
            background: #f8f9fa;
            border: 2px solid var(--primary);
            transform: translateX(5px);
        }
        
        .option-item.selected {
            background: #e3f2fd;
            border: 2px solid var(--primary);
            color: var(--dark);
        }
        
        .option-item.correct {
            background: #d4edda;
            border: 2px solid var(--success);
            color: #155724;
        }
        
        .option-item.incorrect {
            background: #f8d7da;
            border: 2px solid var(--danger);
            color: #721c24;
        }
        
        .explanation {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-radius: 10px;
            border-left: 4px solid var(--warning);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Resultados */
        .results-container {
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 15px;
            margin: 25px 0;
            border: 2px dashed var(--gray-light);
        }
        
        .score-display {
            font-size: 4.5rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
            text-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .score-text {
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: var(--gray);
            font-weight: 500;
        }
        
        .review-container {
            text-align: left;
            margin-top: 40px;
        }
        
        .review-item {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 6px solid var(--gray-light);
        }
        
        .review-question {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark);
            font-size: 1.1rem;
        }
        
        .review-answer {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
        }
        
        .correct-answer {
            background: #d4edda;
            border-left: 4px solid var(--success);
        }
        
        .incorrect-answer {
            background: #f8d7da;
            border-left: 4px solid var(--danger);
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            color: white;
            font-size: 1rem;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }
        
        footer p {
            margin-bottom: 10px;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .container {
                padding: 25px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .menu-item.general {
                grid-column: span 1;
            }
            
            .options-container {
                flex-direction: column;
                align-items: center;
            }
            
            .option-card {
                width: 100%;
                max-width: 400px;
            }
            
            .text-container {
                max-height: 400px;
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 15px;
                width: 100%;
                margin: 5px 0;
            }
            
            .question-container {
                padding: 20px;
            }
            
            .score-display {
                font-size: 3.5rem;
            }
            
            .score-text {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Pantalla de inicio / Men煤 principal -->
        <div id="main-menu" class="container">
            <h1>Evaluador de Comprensi贸n Lectora</h1>
            <p>Selecciona un texto para evaluar tu comprensi贸n lectora. Cada texto contiene preguntas espec铆ficas que evaluar谩n tu capacidad para identificar ideas principales, reconocer detalles importantes e interpretar informaci贸n.</p>
            
            <div class="menu-grid">
                <!-- Los elementos del men煤 se generar谩n din谩micamente -->
            </div>
        </div>
        
        <!-- Pantalla de lectura del texto -->
        <div id="text-screen" class="container hidden">
            <h2 id="text-title" class="text-title"></h2>
            
            <div class="text-container">
                <div id="text-content" class="text-content"></div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="continue-to-summary" class="btn">Continuar al Resumen</button>
                <button id="back-to-menu-from-text" class="btn btn-secondary">Volver al Men煤</button>
            </div>
        </div>
        
        <!-- Pantalla de resumen -->
        <div id="summary-screen" class="container hidden">
            <h2>Resumen y Explicaci贸n</h2>
            <div id="summary-content" class="summary-container"></div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="continue-to-exam-type" class="btn">Continuar a la Evaluaci贸n</button>
                <button id="back-to-text" class="btn btn-secondary">Volver al Texto</button>
            </div>
        </div>
        
        <!-- Pantalla para seleccionar tipo de examen -->
        <div id="exam-type-screen" class="container hidden">
            <h2>Selecciona el Tipo de Evaluaci贸n</h2>
            <p>Elige el tipo de evaluaci贸n que prefieres realizar:</p>
            
            <div class="options-container">
                <div class="option-card" id="with-help">
                    <div>
                        <h3>Evaluaci贸n con Ayuda</h3>
                        <p>Despu茅s de responder cada pregunta, ver谩s una explicaci贸n detallada que te ayudar谩 a comprender mejor el texto.</p>
                        <p>Ideal si est谩s aprendiendo y quieres entender tus errores inmediatamente.</p>
                    </div>
                    <p class="highlight">Recomendado para aprendizaje</p>
                </div>
                
                <div class="option-card" id="without-help">
                    <div>
                        <h3>Evaluaci贸n sin Ayuda</h3>
                        <p>Responder谩s todas las preguntas y solo al final ver谩s tus resultados y las explicaciones.</p>
                        <p>Simula un examen real donde no recibes retroalimentaci贸n inmediata.</p>
                    </div>
                    <p class="highlight">Simula un examen real</p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button id="back-to-summary" class="btn btn-secondary">Volver al Resumen</button>
            </div>
        </div>
        
        <!-- Pantalla para configurar n煤mero de preguntas -->
        <div id="config-screen" class="container hidden">
            <h2>Configuraci贸n de la Evaluaci贸n</h2>
            <p>Selecciona cu谩ntas preguntas deseas responder (m谩ximo disponibles: <span id="max-questions">30</span>):</p>
            <div class="config-container">
                <div class="slider-container">
                    <label for="question-count">N煤mero de preguntas:</label>
                    <input type="range" id="question-count" class="slider" min="1" max="30" value="10">
                    <div class="slider-value" id="question-count-value">10</div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button id="start-exam" class="btn btn-success">Comenzar Evaluaci贸n</button>
                <button id="back-to-exam-type" class="btn btn-secondary">Volver Atr谩s</button>
            </div>
        </div>
        
        <!-- Pantalla del examen -->
        <div id="exam-screen" class="container hidden">
            <h2 id="exam-title">Evaluaci贸n</h2>
            
            <div class="progress-container">
                <div class="question-counter">
                    <span>Pregunta <span id="current-question">1</span> de <span id="total-questions">10</span></span>
                    <span id="text-indicator"></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
            
            <div id="questions-container">
                <!-- Las preguntas se generar谩n din谩micamente -->
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button id="next-question" class="btn">Siguiente Pregunta</button>
                <button id="finish-exam" class="btn btn-success hidden">Finalizar Evaluaci贸n</button>
                <button id="cancel-exam" class="btn btn-danger">Cancelar</button>
            </div>
        </div>
        
        <!-- Pantalla de resultados -->
        <div id="results-screen" class="container hidden">
            <h2>Resultados de la Evaluaci贸n</h2>
            
            <div class="results-container">
                <h3>Tu puntuaci贸n</h3>
                <div class="score-display" id="score-percentage">0%</div>
                <div class="score-text" id="score-text"></div>
                
                <div id="detailed-results">
                    <p>Respuestas correctas: <span id="correct-count">0</span> de <span id="total-answered">0</span></p>
                </div>
                
                <button id="review-answers" class="btn">Revisar Respuestas</button>
                <button id="new-exam" class="btn">Nueva Evaluaci贸n</button>
                <button id="back-to-menu-from-results" class="btn btn-secondary">Volver al Men煤 Principal</button>
            </div>
            
            <div id="review-container" class="review-container hidden">
                <h3>Revisi贸n de Respuestas</h3>
                <div id="review-questions">
                    <!-- Las respuestas revisadas se generar谩n din谩micamente -->
                </div>
            </div>
        </div>
        
        <!-- Pantalla del examen general -->
        <div id="general-exam-config" class="container hidden">
            <h2>Examen General</h2>
            <p>Esta evaluaci贸n incluir谩 3 preguntas aleatorias de cada uno de los 10 textos (30 preguntas en total).</p>
            <p>Las preguntas se mezclar谩n aleatoriamente y antes de cada bloque de preguntas se mostrar谩 el texto correspondiente.</p>
            
            <div style="text-align: center; margin-top: 30px;">
                <button id="start-general-exam" class="btn btn-success">Comenzar Examen General</button>
                <button id="back-to-menu-from-general" class="btn btn-secondary">Volver al Men煤</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Aplicaci贸n de Evaluaci贸n de Comprensi贸n Lectora &copy; 2023</p>
        <p>Dise帽ada para evaluar la capacidad de identificaci贸n de ideas principales, reconocimiento de detalles importantes e interpretaci贸n de informaci贸n.</p>
    </footer>

    <script>
        // Datos de la aplicaci贸n
        const appData = {
            currentText: null,
            currentExamType: null,
            currentQuestions: [],
            currentQuestionIndex: 0,
            userAnswers: [],
            examInProgress: false,
            withHelp: false,
            totalQuestions: 10,
            generalExam: false,
            generalExamTextsShown: []
        };

        // Datos de textos y preguntas
        const texts = [
            {
                id: 1,
                title: "Deforestaci贸n y Cambio Clim谩tico en los Andes Bolivianos: Una Perspectiva Hist贸rica y Evolutiva",
                content: `La regi贸n andina de Bolivia ha experimentado una transformaci贸n profunda de sus ecosistemas forestales desde tiempos precolombinos hasta la actualidad. Este art铆culo revisa la secuencia hist贸rica de la deforestaci贸n, sus causas estructurales y sus efectos sobre el balance clim谩tico local y regional.`,
                summary: "Este texto analiza la deforestaci贸n en los Andes bolivianos desde tiempos precolombinos hasta hoy, destacando sus causas hist贸ricas y sus impactos en el clima local.",
                questions: [
                    {
                        question: "Seg煤n el art铆culo, 驴cu谩l fue la reducci贸n porcentual de la superficie forestal entre 1900 y 1960?",
                        options: [
                            "30% entre 1900-1960",
                            "20% entre 1900-1960", 
                            "25% entre 1900-1960",
                            "15% entre 1900-1960"
                        ],
                        correctAnswer: 1,
                        explanation: "El p谩rrafo indica que la superficie forestal pas贸 de 4,9 millones a 3,9 millones de hect谩reas entre 1900 y 1960, lo que corresponde a una reducci贸n del 20%."
                    },
                    {
                        question: "驴Qu茅 problemas identifica el art铆culo como consecuencias de la deforestaci贸n?",
                        options: [
                            "Disminuci贸n de temperatura y sequ铆as menos intensas",
                            "Aumento de temperatura y mayor variabilidad de lluvias",
                            "Mejora en la calidad del suelo y aumento de precipitaciones",
                            "Estabilidad clim谩tica y aumento de biodiversidad"
                        ],
                        correctAnswer: 1,
                        explanation: "La deforestaci贸n ha generado un aumento de la temperatura media y una mayor variabilidad de precipitaciones."
                    }
                ]
            },
            {
                id: 2,
                title: "Educaci贸n Digital y la Brecha de Conectividad en Bolivia",
                content: `El proceso de digitalizaci贸n de la educaci贸n ha cobrado una relevancia sin precedentes tras la pandemia de COVID-19, revelando y ampliando la brecha de conectividad en pa铆ses en desarrollo.`,
                summary: "Este texto examina los desaf铆os de la educaci贸n digital en Bolivia, destacando la brecha de conectividad entre zonas urbanas y rurales.",
                questions: [
                    {
                        question: "驴C贸mo se define el concepto de brecha digital?",
                        options: [
                            "La diferencia en velocidad de internet",
                            "La diferencia entre quienes pueden acceder y utilizar eficazmente las TIC y quienes no",
                            "La desigualdad en la calidad de la educaci贸n",
                            "La disparidad en el n煤mero de dispositivos"
                        ],
                        correctAnswer: 1,
                        explanation: "La brecha digital se define como la diferencia entre quienes pueden acceder y utilizar eficazmente las TIC y quienes no lo pueden."
                    }
                ]
            },
            {
                id: 3,
                title: "Historia y evoluci贸n del Internet en Bolivia",
                content: `El presente art铆culo revisa la trayectoria hist贸rica del Internet en Bolivia, partiendo de los antecedentes mundiales hasta los desarrollos m谩s recientes en la tecnolog铆a 5G.`,
                summary: "Este texto recorre la historia de Internet en Bolivia desde sus inicios con enlaces satelitales hasta la actual tecnolog铆a 5G.",
                questions: [
                    {
                        question: "驴C贸mo define el concepto de acceso dial up?",
                        options: [
                            "Conexi贸n inal谩mbrica por sat茅lite",
                            "Uso de la l铆nea telef贸nica convencional para conectar a Internet a 56 kbps",
                            "Acceso a Internet mediante redes m贸viles 4G LTE",
                            "Conexi贸n mediante fibra 贸ptica a alta velocidad"
                        ],
                        correctAnswer: 1,
                        explanation: "El acceso dial up utiliza la l铆nea telef贸nica convencional para conectar a Internet a velocidades de 56 kbps."
                    }
                ]
            },
            {
                id: 4,
                title: "Impacto de la digitalizaci贸n y las redes sociales",
                content: `El presente art铆culo examina c贸mo la expansi贸n de la digitalizaci贸n y el uso masivo de redes sociales est谩n transformando la participaci贸n pol铆tica de los j贸venes.`,
                summary: "Este texto analiza c贸mo las redes sociales y la digitalizaci贸n est谩n cambiando la participaci贸n pol铆tica de los j贸venes en Bolivia.",
                questions: [
                    {
                        question: "驴Cu谩l fue la consecuencia social inmediata de la campa帽a #ReformaEducativa2022?",
                        options: [
                            "Creaci贸n de una plataforma digital",
                            "Una marcha con m谩s de 5000 participantes en la Plaza Murillo",
                            "Aprobaci贸n de una nueva ley educativa",
                            "Renuncia del ministro de educaci贸n"
                        ],
                        correctAnswer: 1,
                        explanation: "El hashtag #ReformaEducativa2022 result贸 en una marcha en la Plaza Murillo con m谩s de 5000 participantes."
                    }
                ]
            },
            {
                id: 5,
                title: "Inteligencia artificial en la educaci贸n boliviana",
                content: `El r谩pido avance de la inteligencia artificial (IA) est谩 transformando la manera en que se concibe la ense帽anza y el aprendizaje en todo el mundo.`,
                summary: "Este texto explora el uso de inteligencia artificial en la educaci贸n boliviana.",
                questions: [
                    {
                        question: "驴Qu茅 actor inici贸 la implementaci贸n de herramientas de IA en la educaci贸n boliviana?",
                        options: [
                            "Universidad Cat贸lica Boliviana",
                            "Ministerio de Educaci贸n",
                            "Empresas de tecnolog铆a internacionales",
                            "Universidad Mayor de San Andr茅s"
                        ],
                        correctAnswer: 1,
                        explanation: "El Ministerio de Educaci贸n es responsable del programa 'Bolivia Aprende Digital' que incorpora plataformas de IA."
                    }
                ]
            },
            {
                id: 6,
                title: "Salud y sostenibilidad",
                content: `El presente art铆culo analiza la relaci贸n entre el cambio clim谩tico y la aparici贸n de enfermedades transmitidas por vectores en Bolivia.`,
                summary: "Este texto examina c贸mo el cambio clim谩tico est谩 aumentando las enfermedades transmitidas por vectores en Bolivia.",
                questions: [
                    {
                        question: "驴C贸mo define el art铆culo el concepto de 'vector'?",
                        options: [
                            "Insectos que causan picaduras molestas",
                            "Organismos que transmiten pat贸genos a los humanos",
                            "Microorganismos que causan enfermedades",
                            "Animales que se alimentan de sangre humana"
                        ],
                        correctAnswer: 1,
                        explanation: "Vectores son organismos que transmiten pat贸genos a los humanos."
                    }
                ]
            },
            {
                id: 7,
                title: "Econom铆a circular y gesti贸n de residuos",
                content: `El presente art铆culo examina la viabilidad y el impacto de la econom铆a circular como modelo para la gesti贸n de residuos s贸lidos en Bolivia.`,
                summary: "Este texto analiza la econom铆a circular como soluci贸n para la gesti贸n de residuos en Bolivia.",
                questions: [
                    {
                        question: "驴Qu茅 instrumentos financieros recomienda para estimular la econom铆a circular?",
                        options: [
                            "Subsidios directos a empresas recicladoras",
                            "Fondos de garant铆a, l铆neas de cr茅dito verde y pago por servicios ambientales",
                            "Incentivos fiscales para consumidores",
                            "Micro bonos verdes"
                        ],
                        correctAnswer: 1,
                        explanation: "Se recomiendan fondos de garant铆a, l铆neas de cr茅dito verde y esquemas de pago por servicios ambientales."
                    }
                ]
            },
            {
                id: 8,
                title: "Resistencia a los antibi贸ticos",
                content: `La resistencia a los antibi贸ticos (RA) es una amenaza global que afecta de forma aguda a pa铆ses en desarrollo como Bolivia.`,
                summary: "Este texto aborda el problema de la resistencia a los antibi贸ticos en Bolivia.",
                questions: [
                    {
                        question: "驴Cu谩les son las 谩reas de acci贸n emergentes para enfrentar la resistencia a los antibi贸ticos?",
                        options: [
                            "Investigaci贸n m茅dica y vigilancia epidemiol贸gica",
                            "Pol铆tica sanitaria, educaci贸n comunitaria, innovaci贸n biotecnol贸gica y enfoque One Health",
                            "Capacitaci贸n m茅dica y control de ventas",
                            "Producci贸n local y distribuci贸n equitativa"
                        ],
                        correctAnswer: 1,
                        explanation: "Las 谩reas son: pol铆tica sanitaria, educaci贸n comunitaria, innovaci贸n biotecnol贸gica y enfoque One Health."
                    }
                ]
            },
            {
                id: 9,
                title: "Gesti贸n sostenible de los recursos h铆dricos",
                content: `El sector andino de Bolivia alberga la mayor concentraci贸n de glaciares de Sudam茅rica fuera de la zona polar.`,
                summary: "Este texto analiza el retroceso de los glaciares en el Altiplano boliviano.",
                questions: [
                    {
                        question: "驴Cu谩l es el orden correcto de los actores involucrados en la gesti贸n h铆drica?",
                        options: [
                            "Servicio Solar Boliviano, UMSA, USGS/NASA",
                            "USGS/NASA, Ministerio de Medio Ambiente/UMSA, Servicio Solar Boliviano",
                            "Ministerio de Medio Ambiente, NASA, Servicio Solar Boliviano",
                            "UMSA, Servicio Solar Boliviano, Ministerio de Medio Ambiente"
                        ],
                        correctAnswer: 1,
                        explanation: "Primero USGS/NASA, luego Ministerio de Medio Ambiente/UMSA, y finalmente Servicio Solar Boliviano."
                    }
                ]
            },
            {
                id: 10,
                title: "Inteligencia Artificial Generativa",
                content: `La inteligencia artificial generativa (IAG) ha emergido como una de las tecnolog铆as m谩s disruptivas del siglo XXI.`,
                summary: "Este texto explora la inteligencia artificial generativa y su impacto en Bolivia.",
                questions: [
                    {
                        question: "驴Qu茅 beneficio principal ofrece el uso de servicios en la nube para estudiantes y peque帽as empresas?",
                        options: [
                            "Mayor seguridad de datos",
                            "Acceso a potencia de computaci贸n sin hardware especializado",
                            "Conexi贸n gratuita a internet",
                            "Capacitaci贸n t茅cnica en programaci贸n"
                        ],
                        correctAnswer: 1,
                        explanation: "Permite acceder a potencia de computaci贸n sin necesidad de poseer hardware especializado."
                    }
                ]
            }
        ];

        // Funci贸n para inicializar la aplicaci贸n
        function initApp() {
            generateMainMenu();
            setupEventListeners();
        }

        // Generar el men煤 principal
        function generateMainMenu() {
            const menuGrid = document.querySelector('.menu-grid');
            menuGrid.innerHTML = '';
            
            // Agregar opciones para cada texto
            texts.forEach(text => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';
                menuItem.dataset.textId = text.id;
                
                menuItem.innerHTML = `
                    <h3>Texto ${text.id}</h3>
                    <p>${text.title.substring(0, 80)}...</p>
                    <div class="badge">${text.questions.length} preguntas</div>
                `;
                
                menuGrid.appendChild(menuItem);
            });
            
            // Agregar opci贸n para examen general
            const generalItem = document.createElement('div');
            generalItem.className = 'menu-item general';
            generalItem.id = 'general-exam-item';
            
            generalItem.innerHTML = `
                <h3>Examen General</h3>
                <p>Evaluaci贸n con preguntas de todos los textos (30 preguntas en total)</p>
                <p><strong>Incluye:</strong> 3 preguntas aleatorias de cada texto</p>
            `;
            
            menuGrid.appendChild(generalItem);
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Men煤 principal: selecci贸n de texto
            document.addEventListener('click', function(e) {
                const menuItem = e.target.closest('.menu-item:not(#general-exam-item)');
                if (menuItem) {
                    const textId = parseInt(menuItem.dataset.textId);
                    startTextReading(textId);
                }
            });
            
            // Examen general
            document.getElementById('general-exam-item').addEventListener('click', function() {
                showGeneralExamConfig();
            });
            
            // Continuar del texto al resumen
            document.getElementById('continue-to-summary').addEventListener('click', continueToSummary);
            
            // Volver al men煤 desde el texto
            document.getElementById('back-to-menu-from-text').addEventListener('click', backToMenu);
            
            // Continuar del resumen al tipo de examen
            document.getElementById('continue-to-exam-type').addEventListener('click', continueToExamType);
            
            // Volver al texto desde el resumen
            document.getElementById('back-to-text').addEventListener('click', backToText);
            
            // Selecci贸n de tipo de examen
            document.getElementById('with-help').addEventListener('click', function() {
                selectExamType(true);
            });
            
            document.getElementById('without-help').addEventListener('click', function() {
                selectExamType(false);
            });
            
            // Volver al resumen desde tipo de examen
            document.getElementById('back-to-summary').addEventListener('click', backToSummary);
            
            // Configurar n煤mero de preguntas
            const questionSlider = document.getElementById('question-count');
            const questionValue = document.getElementById('question-count-value');
            
            questionSlider.addEventListener('input', function() {
                questionValue.textContent = this.value;
                appData.totalQuestions = parseInt(this.value);
            });
            
            // Comenzar examen
            document.getElementById('start-exam').addEventListener('click', startExam);
            
            // Volver al tipo de examen desde configuraci贸n
            document.getElementById('back-to-exam-type').addEventListener('click', backToExamType);
            
            // Navegaci贸n durante el examen
            document.getElementById('next-question').addEventListener('click', nextQuestion);
            document.getElementById('finish-exam').addEventListener('click', finishExam);
            document.getElementById('cancel-exam').addEventListener('click', cancelExam);
            
            // Resultados
            document.getElementById('review-answers').addEventListener('click', toggleReviewAnswers);
            document.getElementById('new-exam').addEventListener('click', newExam);
            document.getElementById('back-to-menu-from-results').addEventListener('click', backToMenu);
            
            // Examen general
            document.getElementById('start-general-exam').addEventListener('click', startGeneralExam);
            document.getElementById('back-to-menu-from-general').addEventListener('click', backToMenu);
        }

        // Funciones de navegaci贸n
        function showScreen(screenId) {
            // Ocultar todas las pantallas
            document.querySelectorAll('.container').forEach(container => {
                container.classList.add('hidden');
            });
            
            // Mostrar la pantalla solicitada
            document.getElementById(screenId).classList.remove('hidden');
        }

        function startTextReading(textId) {
            const text = texts.find(t => t.id === textId);
            appData.currentText = text;
            
            // Mostrar el texto
            document.getElementById('text-title').textContent = text.title;
            document.getElementById('text-content').textContent = text.content;
            
            showScreen('text-screen');
        }

        function continueToSummary() {
            // Mostrar el resumen
            document.getElementById('summary-content').innerHTML = `
                <h3>Resumen simplificado</h3>
                <p>${appData.currentText.summary}</p>
                <div style="margin-top: 20px; padding: 15px; background-color: #d6eaf8; border-radius: 5px;">
                    <p><strong>Consejo para el examen:</strong> Presta atenci贸n a los detalles espec铆ficos mencionados en el texto, como porcentajes, fechas y nombres de organismos o programas.</p>
                </div>
            `;
            
            showScreen('summary-screen');
        }

        function backToMenu() {
            resetAppData();
            showScreen('main-menu');
        }

        function backToText() {
            showScreen('text-screen');
        }

        function continueToExamType() {
            showScreen('exam-type-screen');
        }

        function backToSummary() {
            showScreen('summary-screen');
        }

        function selectExamType(withHelp) {
            appData.withHelp = withHelp;
            appData.generalExam = false;
            
            // Configurar n煤mero m谩ximo de preguntas
            const maxQuestions = appData.currentText.questions.length;
            document.getElementById('max-questions').textContent = maxQuestions;
            
            const questionSlider = document.getElementById('question-count');
            questionSlider.max = maxQuestions;
            questionSlider.value = Math.min(10, maxQuestions);
            document.getElementById('question-count-value').textContent = questionSlider.value;
            appData.totalQuestions = parseInt(questionSlider.value);
            
            showScreen('config-screen');
        }

        function backToExamType() {
            showScreen('exam-type-screen');
        }

        function startExam() {
            const questionCount = parseInt(document.getElementById('question-count').value);
            appData.totalQuestions = questionCount;
            
            // Seleccionar preguntas aleatorias SIN REPETIR
            const allQuestions = [...appData.currentText.questions];
            
            // Mezclar preguntas usando el algoritmo Fisher-Yates
            const shuffledQuestions = [...allQuestions];
            for (let i = shuffledQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledQuestions[i], shuffledQuestions[j]] = [shuffledQuestions[j], shuffledQuestions[i]];
            }
            
            // Tomar la cantidad seleccionada
            appData.currentQuestions = shuffledQuestions.slice(0, Math.min(questionCount, shuffledQuestions.length));
            
            // Inicializar datos del examen
            appData.currentQuestionIndex = 0;
            appData.userAnswers = new Array(appData.currentQuestions.length).fill(null);
            appData.examInProgress = true;
            
            // Mostrar pantalla de examen
            showExamScreen();
        }

        function showExamScreen() {
            // Configurar t铆tulo
            if (appData.generalExam) {
                document.getElementById('exam-title').textContent = 'Examen General';
                if (appData.currentQuestions.length > 0 && appData.currentQuestions[appData.currentQuestionIndex].textId) {
                    document.getElementById('text-indicator').textContent = `Texto ${appData.currentQuestions[appData.currentQuestionIndex].textId}`;
                }
            } else {
                document.getElementById('exam-title').textContent = `Evaluaci贸n: ${appData.currentText.title.substring(0, 50)}...`;
                document.getElementById('text-indicator').textContent = '';
            }
            
            // Actualizar progreso
            updateProgress();
            
            // Mostrar pregunta actual
            showCurrentQuestion();
            
            showScreen('exam-screen');
        }

        function updateProgress() {
            const progress = ((appData.currentQuestionIndex + 1) / appData.currentQuestions.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            
            document.getElementById('current-question').textContent = appData.currentQuestionIndex + 1;
            document.getElementById('total-questions').textContent = appData.currentQuestions.length;
            
            // Mostrar u ocultar bot贸n de finalizar
            const finishButton = document.getElementById('finish-exam');
            if (appData.currentQuestionIndex === appData.currentQuestions.length - 1) {
                document.getElementById('next-question').classList.add('hidden');
                finishButton.classList.remove('hidden');
            } else {
                document.getElementById('next-question').classList.remove('hidden');
                finishButton.classList.add('hidden');
            }
        }

        function showCurrentQuestion() {
            const container = document.getElementById('questions-container');
            const question = appData.currentQuestions[appData.currentQuestionIndex];
            
            // Limpiar contenedor
            container.innerHTML = '';
            
            // Si es examen general, mostrar el texto correspondiente antes de las preguntas
            if (appData.generalExam && question.textId) {
                const currentTextId = question.textId;
                const text = texts.find(t => t.id === currentTextId);
                
                // Solo mostrar si no hemos mostrado este texto en la pregunta actual
                if (text && !appData.generalExamTextsShown.includes(currentTextId)) {
                    const textHTML = `
                        <div class="question-container" style="background-color: #f0f7ff; margin-bottom: 20px;">
                            <h3>Texto ${currentTextId}: ${text.title}</h3>
                            <div style="max-height: 200px; overflow-y: auto; margin-top: 10px; padding: 15px; background-color: #f9f9f9; border-radius: 10px; border: 1px solid #ddd;">
                                <p>${text.content.substring(0, 400)}...</p>
                                <p style="margin-top: 10px; font-style: italic; color: #666;">
                                    <strong>Consejo:</strong> Lee atentamente este texto antes de responder las preguntas relacionadas.
                                </p>
                            </div>
                        </div>
                    `;
                    
                    const textContainer = document.createElement('div');
                    textContainer.innerHTML = textHTML;
                    container.appendChild(textContainer);
                    appData.generalExamTextsShown.push(currentTextId);
                }
            }
            
            // Crear contenedor de pregunta
            const questionContainer = document.createElement('div');
            questionContainer.className = 'question-container';
            
            let questionHTML = `
                <div class="question-text">${appData.currentQuestionIndex + 1}. ${question.question}</div>
                <ul class="options-list">
            `;
            
            // Mostrar opciones
            question.options.forEach((option, index) => {
                let optionClass = 'option-item';
                
                // Si ya se seleccion贸 esta opci贸n
                if (appData.userAnswers[appData.currentQuestionIndex] === index) {
                    optionClass += ' selected';
                }
                
                questionHTML += `
                    <li class="${optionClass}" data-option-index="${index}" data-letter="${String.fromCharCode(65 + index)}">
                        <span>${option}</span>
                    </li>
                `;
            });
            
            questionHTML += `</ul>`;
            
            // Mostrar explicaci贸n si es con ayuda y ya se respondi贸
            if (appData.withHelp && appData.userAnswers[appData.currentQuestionIndex] !== null) {
                const isCorrect = appData.userAnswers[appData.currentQuestionIndex] === question.correctAnswer;
                questionHTML += `
                    <div class="explanation">
                        <p><strong>${isCorrect ? '隆Correcto!' : 'Incorrecto.'}</strong> ${question.explanation}</p>
                    </div>
                `;
            }
            
            questionContainer.innerHTML = questionHTML;
            container.appendChild(questionContainer);
            
            // Agregar event listeners a las opciones
            container.querySelectorAll('.option-item').forEach(item => {
                item.addEventListener('click', function() {
                    selectOption(parseInt(this.dataset.optionIndex));
                });
            });
        }

        function selectOption(optionIndex) {
            // Guardar respuesta
            appData.userAnswers[appData.currentQuestionIndex] = optionIndex;
            
            // Actualizar visualmente la selecci贸n
            const container = document.getElementById('questions-container');
            const optionItems = container.querySelectorAll('.option-item');
            
            optionItems.forEach(item => {
                item.classList.remove('selected');
                if (parseInt(item.dataset.optionIndex) === optionIndex) {
                    item.classList.add('selected');
                }
            });
            
            // Si es con ayuda, mostrar explicaci贸n inmediatamente
            if (appData.withHelp) {
                showCurrentQuestion();
            }
        }

        function nextQuestion() {
            if (appData.currentQuestionIndex < appData.currentQuestions.length - 1) {
                appData.currentQuestionIndex++;
                updateProgress();
                showCurrentQuestion();
            }
        }

        function finishExam() {
            // Calcular resultados
            let correctCount = 0;
            let totalAnswered = 0;
            
            for (let i = 0; i < appData.currentQuestions.length; i++) {
                if (appData.userAnswers[i] !== null) {
                    totalAnswered++;
                    if (appData.userAnswers[i] === appData.currentQuestions[i].correctAnswer) {
                        correctCount++;
                    }
                }
            }
            
            const scorePercentage = totalAnswered > 0 ? Math.round((correctCount / totalAnswered) * 100) : 0;
            
            // Mostrar resultados
            document.getElementById('score-percentage').textContent = `${scorePercentage}%`;
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('total-answered').textContent = totalAnswered;
            
            // Texto seg煤n puntuaci贸n
            let scoreText = '';
            if (scorePercentage >= 90) {
                scoreText = '隆Excelente! Dominas completamente el contenido.';
            } else if (scorePercentage >= 70) {
                scoreText = '隆Muy bien! Tienes un buen entendimiento del texto.';
            } else if (scorePercentage >= 50) {
                scoreText = 'Aprobado. Podr铆as repasar algunos conceptos.';
            } else {
                scoreText = 'Necesitas estudiar m谩s el material.';
            }
            
            document.getElementById('score-text').textContent = scoreText;
            
            // Ocultar revisi贸n de respuestas inicialmente
            document.getElementById('review-container').classList.add('hidden');
            
            showScreen('results-screen');
        }

        function cancelExam() {
            if (confirm('驴Est谩s seguro de que quieres cancelar el examen? Se perder谩n tus respuestas.')) {
                backToMenu();
            }
        }

        function toggleReviewAnswers() {
            const reviewContainer = document.getElementById('review-container');
            const reviewQuestions = document.getElementById('review-questions');
            
            if (reviewContainer.classList.contains('hidden')) {
                // Mostrar revisi贸n
                reviewQuestions.innerHTML = '';
                
                for (let i = 0; i < appData.currentQuestions.length; i++) {
                    const question = appData.currentQuestions[i];
                    const userAnswer = appData.userAnswers[i];
                    const isCorrect = userAnswer === question.correctAnswer;
                    
                    const reviewItem = document.createElement('div');
                    reviewItem.className = 'review-item';
                    
                    let answerHTML = '';
                    if (userAnswer !== null) {
                        answerHTML = `
                            <p><strong>Tu respuesta:</strong> ${String.fromCharCode(65 + userAnswer)}) ${question.options[userAnswer]}</p>
                            <p><strong>Respuesta correcta:</strong> ${String.fromCharCode(65 + question.correctAnswer)}) ${question.options[question.correctAnswer]}</p>
                            <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
                                <p><strong>Explicaci贸n:</strong> ${question.explanation}</p>
                            </div>
                        `;
                    } else {
                        answerHTML = `<p><strong>No respondiste esta pregunta.</strong></p>`;
                    }
                    
                    reviewItem.innerHTML = `
                        <div class="review-question">${i + 1}. ${question.question}</div>
                        <div class="review-answer ${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                            ${answerHTML}
                        </div>
                    `;
                    
                    reviewQuestions.appendChild(reviewItem);
                }
                
                reviewContainer.classList.remove('hidden');
                document.getElementById('review-answers').textContent = 'Ocultar Revisi贸n';
            } else {
                // Ocultar revisi贸n
                reviewContainer.classList.add('hidden');
                document.getElementById('review-answers').textContent = 'Revisar Respuestas';
            }
        }

        function newExam() {
            if (appData.generalExam) {
                showGeneralExamConfig();
            } else {
                showScreen('exam-type-screen');
            }
        }

        // Funciones para examen general
        function showGeneralExamConfig() {
            showScreen('general-exam-config');
        }

        function startGeneralExam() {
            appData.generalExam = true;
            appData.withHelp = false; // Examen general siempre es sin ayuda durante el examen
            appData.currentQuestions = [];
            appData.generalExamTextsShown = [];
            
            // Seleccionar 3 preguntas aleatorias de cada texto
            texts.forEach(text => {
                // Crear una copia de las preguntas para no modificar el original
                const textQuestions = [...text.questions];
                
                // Mezclar preguntas usando Fisher-Yates
                for (let i = textQuestions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [textQuestions[i], textQuestions[j]] = [textQuestions[j], textQuestions[i]];
                }
                
                // Tomar 3 preguntas (o menos si no hay suficientes)
                const questionsToTake = Math.min(3, textQuestions.length);
                for (let i = 0; i < questionsToTake; i++) {
                    const question = {...textQuestions[i]};
                    question.textId = text.id; // Agregar referencia al texto
                    appData.currentQuestions.push(question);
                }
            });
            
            // Mezclar todas las preguntas
            for (let i = appData.currentQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [appData.currentQuestions[i], appData.currentQuestions[j]] = [appData.currentQuestions[j], appData.currentQuestions[i]];
            }
            
            // Ajustar el total de preguntas en caso de que alg煤n texto tenga menos de 3 preguntas
            appData.totalQuestions = appData.currentQuestions.length;
            
            // Inicializar datos del examen
            appData.currentQuestionIndex = 0;
            appData.userAnswers = new Array(appData.currentQuestions.length).fill(null);
            appData.examInProgress = true;
            
            // Mostrar pantalla de examen
            showExamScreen();
        }
        
        function resetAppData() {
            appData.currentText = null;
            appData.currentExamType = null;
            appData.currentQuestions = [];
            appData.currentQuestionIndex = 0;
            appData.userAnswers = [];
            appData.examInProgress = false;
            appData.withHelp = false;
            appData.totalQuestions = 10;
            appData.generalExam = false;
            appData.generalExamTextsShown = [];
        }

        // Inicializar la aplicaci贸n cuando se carga la p谩gina
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
